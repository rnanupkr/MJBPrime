<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>12‑Question Stress & Anxiety Checker</title>
  <style>
    :root{
      --bg:#0b1020; --card:#121833; --accent:#7c9cff; --accent-2:#8fd1c9; --text:#eef2ff; --muted:#b7c0d9; --danger:#ff7c9c; --ok:#8fd1c9; --warn:#ffd27c;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji"; background:radial-gradient(1200px 800px at 15% 0%, #101737 0%, #0b1020 60%); color:var(--text)}
    .container{max-width:980px; margin:32px auto; padding:24px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(124,156,255,0.15); backdrop-filter:blur(8px); border-radius:20px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.45)}
    h1{font-size:clamp(1.6rem,3.6vw,2.4rem); letter-spacing:.2px; margin:0 0 8px}
    p.lead{color:var(--muted); margin:0 0 18px}
    .tip{font-size:.9rem; color:var(--muted)}
    .grid{display:grid; grid-template-columns:1fr; gap:14px}
    @media(min-width:840px){.grid{grid-template-columns:1fr 1fr}}
    fieldset{border:1px solid rgba(124,156,255,0.18); border-radius:14px; padding:14px; transition:border-color .2s ease}
    fieldset:hover{border-color:rgba(124,156,255,0.35)}
    legend{font-weight:600; color:#dfe6ff; padding:0 8px}
    .options{display:grid; grid-template-columns:repeat(5, minmax(0,1fr)); gap:8px; margin-top:8px}
    .opt{position:relative}
    .opt input{position:absolute; opacity:0; inset:0}
    .opt label{display:block; text-align:center; padding:10px 8px; border-radius:10px; border:1px solid rgba(124,156,255,0.25); background:#0e1430; cursor:pointer; user-select:none; font-size:.93rem}
    .opt input:checked + label{outline:2px solid var(--accent); border-color:transparent; box-shadow:0 0 0 3px rgba(124,156,255,.18) inset}

    .controls{display:flex; flex-wrap:wrap; gap:10px; margin-top:18px}
    button{border:0; padding:12px 16px; border-radius:14px; font-weight:700; cursor:pointer; transition:transform .06s ease, box-shadow .2s ease; color:#0b1020}
    .primary{background:linear-gradient(90deg, var(--accent), #6bc2ff); box-shadow:0 8px 20px rgba(124,156,255,.35)}
    .primary:hover{transform:translateY(-1px)}
    .ghost{background:linear-gradient(90deg, #e7ecff, #cfe9ff)}

    .results{margin-top:22px; display:none}
    .badge{display:inline-flex; align-items:center; gap:8px; font-weight:700; padding:6px 10px; border-radius:999px}
    .badge.low{background:rgba(143,209,201,.18); color:var(--ok); border:1px solid rgba(143,209,201,.45)}
    .badge.moderate{background:rgba(255,210,124,.18); color:var(--warn); border:1px solid rgba(255,210,124,.45)}
    .badge.high{background:rgba(255,124,156,.18); color:var(--danger); border:1px solid rgba(255,124,156,.45)}

    .bar{height:12px; background:#0e1430; border-radius:999px; border:1px solid rgba(124,156,255,0.25); overflow:hidden}
    .bar > span{display:block; height:100%; width:0%; background:linear-gradient(90deg, var(--accent-2), var(--accent)); transition:width .7s ease}
    .row{display:grid; grid-template-columns:140px 1fr 70px; gap:12px; align-items:center; margin:8px 0}
    .row label{color:#dfe6ff}
    .row .pct{text-align:right; color:#dbe2ff; font-variant-numeric:tabular-nums}
    .summary{margin-top:14px; padding:14px; border-radius:14px; background:rgba(255,255,255,.03); border:1px solid rgba(124,156,255,.15)}
    .advice{margin-top:12px; display:grid; gap:10px}
    .advice .card{padding:14px}
    .print-note{font-size:.85rem; color:var(--muted)}
    .footer{margin-top:26px; font-size:.85rem; color:var(--muted)}
    .hidden{display:none !important}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>12‑Question Stress & Anxiety Checker</h1>
      <p class="lead">Answer how often each item applied in the <strong>past two weeks</strong>. This is a self‑check, not a diagnosis.</p>
      <div class="tip">Options: Never (0), Rarely (1), Sometimes (2), Often (3), Almost always (4)</div>
    </div>

    <form id="quiz" class="grid" novalidate>
      <!-- Questions will be injected here by JS for consistency and easier maintenance -->
    </form>

    <div class="controls">
      <button type="button" class="primary" id="scoreBtn">See My Results</button>
      <button type="button" class="ghost" id="resetBtn">Reset</button>
      <button type="button" class="ghost" id="printBtn">Save/Print PDF</button>
    </div>

    <section id="results" class="results card" aria-live="polite">
      <h2 style="margin-top:0">Your Results</h2>
      <div id="overallBadge" class="badge">Overall status</div>

      <div class="summary" id="overallSummary"></div>

      <h3 style="margin-bottom:6px">Domain Breakdown</h3>
      <div id="breakdown"></div>

      <div class="advice" id="advice"></div>

      <div class="footer">This tool offers guidance only and cannot diagnose or replace professional care. If your results are high or you have thoughts of self‑harm, seek professional help immediately.</div>
    </section>
  </div>

  <script>
    const QUESTIONS = [
      { id:1, text:"I feel nervous, on edge, or keyed up.", domain:"anxiety" },
      { id:2, text:"I feel overwhelmed by demands or responsibilities.", domain:"stress" },
      { id:3, text:"I have trouble falling or staying asleep.", domain:"sleep" },
      { id:4, text:"I have little interest or pleasure in doing things.", domain:"mood" },
      { id:5, text:"I notice physical restlessness, racing heart, or shortness of breath without exertion.", domain:"anxiety" },
      { id:6, text:"I find it hard to relax or switch off.", domain:"stress" },
      { id:7, text:"I wake up unrefreshed or feel tired even after sleep.", domain:"sleep" },
      { id:8, text:"I get irritable or snap at people more than usual.", domain:"mood" },
      { id:9, text:"I worry about many different things and find it hard to control the worry.", domain:"anxiety" },
      { id:10, text:"I have trouble concentrating or my mind goes blank.", domain:"stress" },
      { id:11, text:"I have headaches, stomach upsets, or muscle tension without a clear medical reason.", domain:"somatic" },
      { id:12, text:"I avoid tasks or procrastinate because they feel overwhelming.", domain:"mood" }
    ];

    const OPTIONS = [
      {label:"Never", value:0},
      {label:"Rarely", value:1},
      {label:"Sometimes", value:2},
      {label:"Often", value:3},
      {label:"Almost always", value:4}
    ];

    const DOMAINS = {
      anxiety: { label:"Anxiety", qids:[1,5,9] },
      stress: { label:"Stress", qids:[2,6,10] },
      sleep: { label:"Sleep", qids:[3,7] },
      mood: { label:"Mood / Irritability", qids:[4,8,12] },
      somatic: { label:"Physical (Somatic)", qids:[11] },
    };

    // Build the questionnaire UI
    const formEl = document.getElementById('quiz');
    QUESTIONS.forEach((q, i) => {
      const fs = document.createElement('fieldset');
      fs.innerHTML = `<legend>Q${i+1}. ${q.text}</legend>`;
      const opts = document.createElement('div');
      opts.className = 'options';
      OPTIONS.forEach((opt, j) => {
        const id = `q${q.id}_${j}`;
        const wrap = document.createElement('div');
        wrap.className = 'opt';
        wrap.innerHTML = `
          <input type="radio" name="q${q.id}" id="${id}" value="${opt.value}" aria-label="${opt.label}">
          <label for="${id}">${opt.label}<br><span class="tip">${opt.value}</span></label>
        `;
        opts.appendChild(wrap);
      });
      fs.appendChild(opts);
      formEl.appendChild(fs);
    });

    function getScores(){
      const answers = {};
      for(const q of QUESTIONS){
        const chosen = document.querySelector(`input[name="q${q.id}"]:checked`);
        if(!chosen) return { error:`Please answer Question ${q.id}.` };
        answers[q.id] = Number(chosen.value);
      }
      // Domain scores: sum and normalize to 0-100
      const domainScores = {};
      for(const key in DOMAINS){
        const qids = DOMAINS[key].qids;
        const max = qids.length * 4;
        const sum = qids.reduce((acc,id)=>acc + answers[id], 0);
        const pct = Math.round((sum / max) * 100);
        domainScores[key] = { sum, max, pct };
      }
      // Overall index: weighted equally by domains present
      const pcts = Object.values(domainScores).map(x=>x.pct);
      const overallPct = Math.round(pcts.reduce((a,b)=>a+b,0) / pcts.length);
      return { answers, domainScores, overallPct };
    }

    function band(pct){
      if(pct <= 20) return {label:'Low', cls:'low'};
      if(pct <= 45) return {label:'Mild', cls:'moderate'};
      if(pct <= 70) return {label:'Moderate', cls:'moderate'};
      return {label:'High', cls:'high'};
    }

    function domainSummaryText(key, pct){
      const name = DOMAINS[key].label;
      if(key==='anxiety'){
        if(pct<25) return `${name}: minimal signs of anxious arousal.`;
        if(pct<50) return `${name}: some restlessness or worry appears sometimes.`;
        if(pct<75) return `${name}: frequent worry or tension — consider anxiety‑focused coping.`;
        return `${name}: strong anxiety signals — professional support may help.`;
      }
      if(key==='stress'){
        if(pct<25) return `${name}: manageable load.`;
        if(pct<50) return `${name}: occasional overload.`;
        if(pct<75) return `${name}: persistent pressure — review workload and boundaries.`;
        return `${name}: sustained high stress — prioritize reduction strategies.`;
      }
      if(key==='sleep'){
        if(pct<25) return `${name}: sleep appears adequate.`;
        if(pct<50) return `${name}: minor sleep disruption.`;
        if(pct<75) return `${name}: regular sleep issues — improve sleep hygiene.`;
        return `${name}: significant sleep disturbance — consider medical review.`;
      }
      if(key==='mood'){
        if(pct<25) return `${name}: stable mood and patience.`;
        if(pct<50) return `${name}: occasional low mood or irritability.`;
        if(pct<75) return `${name}: frequent low mood/irritability — add mood‑support habits.`;
        return `${name}: marked impact on motivation/relationships.`;
      }
      if(key==='somatic'){
        if(pct<25) return `${name}: minimal stress‑related body symptoms.`;
        if(pct<50) return `${name}: some body tension or aches.`;
        if(pct<75) return `${name}: recurrent physical tension — try relaxation and movement.`;
        return `${name}: strong physical stress signals — consider evaluation.`;
      }
      return '';
    }

    function buildAdvice(domainScores){
      const tips = [];
      if(domainScores.stress.pct>=50){
        tips.push({title:"Lower the Load & Add Micro‑Breaks", body:"Batch tasks, say no to non‑essentials, and insert a 5‑minute pause every 60–90 minutes (stand, breathe, stretch)."});
      }
      if(domainScores.anxiety.pct>=50){
        tips.push({title:"Box Breathing + Worry Window", body:"Do 4×4×4×4 breathing (in‑hold‑out‑hold). Schedule a 15‑minute daily 'worry window' to contain rumination."});
      }
      if(domainScores.sleep.pct>=50){
        tips.push({title:"Sleep Hygiene Reset", body:"Keep consistent bed/wake times, avoid screens 60 minutes before bed, and reserve the bed for sleep only."});
      }
      if(domainScores.mood.pct>=50){
        tips.push({title:"Mood Lift Trio", body:"Daily daylight exposure (10–20 min), a short brisk walk, and one enjoyable activity — even if motivation is low."});
      }
      if(domainScores.somatic.pct>=50){
        tips.push({title:"Release Body Tension", body:"Try progressive muscle relaxation or a 60‑second body scan, 2–3× daily."});
      }
      if(tips.length===0){
        tips.push({title:"Maintain What Works", body:"Your scores are generally low. Keep basic routines: movement, sleep schedule, social time, and brief breathing practices."});
      }
      return tips;
    }

    function renderResults(){
      const r = getScores();
      if(r.error){ alert(r.error); return; }
      const {domainScores, overallPct} = r;
      const overall = band(overallPct);

      const badge = document.getElementById('overallBadge');
      badge.className = `badge ${overall.cls}`;
      badge.textContent = `Overall: ${overall.label}`;

      const overallSummary = document.getElementById('overallSummary');
      overallSummary.innerHTML = `<strong>Overall Stress‑Anxiety Index: ${overallPct}%</strong><br>` +
        (overall.label==='Low' ? "You appear to be coping well overall." :
        overall.label==='Mild' ? "There are some areas to watch, but currently manageable." :
        overall.label==='Moderate' ? "Notable impact on daily life — consider targeted changes." :
        "High impact — consider speaking to a healthcare professional.");

      // Breakdown bars
      const breakdown = document.getElementById('breakdown');
      breakdown.innerHTML = '';
      for(const key of Object.keys(DOMAINS)){
        const row = document.createElement('div');
        row.className = 'row';
        const pct = domainScores[key].pct;
        row.innerHTML = `
          <label>${DOMAINS[key].label}</label>
          <div class="bar" aria-hidden="true"><span style="width:${pct}%"></span></div>
          <div class="pct">${pct}%</div>
        `;
        breakdown.appendChild(row);
        // Add domain summary sentences
        const p = document.createElement('div');
        p.className = 'tip';
        p.textContent = domainSummaryText(key, pct);
        breakdown.appendChild(p);
      }

      // Tailored advice
      const adviceWrap = document.getElementById('advice');
      adviceWrap.innerHTML = '';
      buildAdvice(domainScores).forEach(({title, body})=>{
        const c = document.createElement('div');
        c.className = 'card';
        c.innerHTML = `<strong>${title}</strong><div class="tip" style="margin-top:6px">${body}</div>`;
        adviceWrap.appendChild(c);
      });

      document.getElementById('results').style.display = 'block';
      // Scroll to results for convenience
      document.getElementById('results').scrollIntoView({behavior:'smooth', block:'start'});
    }

    // Event handlers
    document.getElementById('scoreBtn').addEventListener('click', renderResults);
    document.getElementById('resetBtn').addEventListener('click', () => {
      document.querySelectorAll('input[type=radio]').forEach(i=>i.checked=false);
      document.getElementById('results').style.display = 'none';
    });
    document.getElementById('printBtn').addEventListener('click', () => window.print());

  </script>
</body>
</html>
